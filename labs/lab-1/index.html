<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Лабораторная работа 1</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Language" content="ru" />
	<!--
		**
		**	Задание 1. Создание объекта XmlHttpRequest
		**		
	-->

	<script type="text/javascript">
		var request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState == 4) {
                if (request.status == 200) {
                    result.firstChild.nodeValue = request.responseText;
                }
            }
        };

		/*
		**
		**	Задание 2. Выборка книги 
		**
		*/

		var url = "getbooktxt.php?num=";


        var input;
        var result;
        window.onload = function(){
            input = document.getElementById("txtNum");
//            input.addEventListener("keyup", function(e){
//                sendurl = url + e.target.value;
//            });
            result = document.getElementById("divResult");
        };

		/*
		**
		**	Задание 3. Обработчик кнопки
		**
		*/

        var showBook = function() {
            request.open("GET", url+input.value, true);
            request.send(null);
        }
	</script>
</head>
<body>
	<h1>Лабораторная работа 1</h1>
	<form action="#" onsubmit="return false">
		<label for="txtNum">Введите номер книги:</label>
		<input id="txtNum" type="text" />
		<button onclick="showBook()">Поиск</button>
	</form>
	<div id="divResult">&nbsp;</div>
</body>
</html>